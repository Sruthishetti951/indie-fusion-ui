"use strict";(self.webpackChunkindie_fusion_ui=self.webpackChunkindie_fusion_ui||[]).push([[534],{1534:(e,s,i)=>{i.r(s),i.d(s,{default:()=>y});var l=i(5043);const a="profile_container-card__C4eZz",t="profile_profile-card__DYBLy",r="profile_input-box__QV4E7",n="profile_required__Kutcf",d="profile_hint-font-size__Z11sg",c="profile_profile-Image__9iSm4",o="profile_form-grid__uESR7",m="profile_profile-image-card__Zvy4i",u="profile_padding-left-20__BHbHz",h="profile_email-display__JFKKx",p="profile_font-bold__QyC4O";var v=i(4858),x=i(6213),f=i(8585),j=i(2037),g=i(6824),N=i(579);const b="/Images/DefaultProfileImage.webp";const y=function(){var e,s,i,y,S,_,C,$,E,k,w,I,A,F,P,O,q,D,R,U,L,T;const[H,B]=(0,l.useState)(b),[V,Q]=(0,l.useState)(!1),[G,M]=(0,l.useState)(null),[Z,z]=(0,l.useState)([]),[J,K]=(0,l.useState)([]),X=(0,l.useRef)(),Y={user:{firstName:"",lastName:"",userName:"",email:"",type:"USER"},profile:{profilePhoto:"",phoneNumber:"",address:"",skills:"",gender:"",dob:"",bio:"",interestedIn:"",country:"",city:"",isActive:!1,openToCollab:!1,userId:localStorage.getItem("USER_ID")}},{register:W,watch:ee,setValue:se,handleSubmit:ie,formState:{errors:le}}=(0,v.mN)({mode:"onChange",defaultValues:Y}),[ae,te]=(0,l.useState)(!1),[re,ne]=(0,l.useState)({email:"",userName:""});(0,l.useEffect)((()=>{const e=ee(((e,s)=>{let{name:i,type:l}=s;if("profile.country"===i){var a;const s=null===(a=Z.find((s=>s.country===e.profile.country)))||void 0===a?void 0:a.cities;K(null!==s&&void 0!==s?s:[])}}));return()=>e.unsubscribe()}),[ee,Z]),(0,l.useEffect)((()=>{!async function(){try{const e=await oe();z(e)}catch(e){(0,j.c3)("unable to get countries")}}()}),[]);const de=(0,l.useCallback)((()=>{const e=localStorage.getItem("USER_ID");x.A.get(`${f.H}/profile-update/${e}`).then((e=>{if(200===(null===e||void 0===e?void 0:e.status)){var s,i;if(e.data.data.user)se("user",e.data.data.user),ne({email:null===(s=e.data.data.user)||void 0===s?void 0:s.email,userName:null===(i=e.data.data.user)||void 0===i?void 0:i.userName});if(e.data.data.profile){var l;const s=null===(l=Z.find((s=>{var i,l;return s.country===(null===(i=e.data.data)||void 0===i||null===(l=i.profile)||void 0===l?void 0:l.country)})))||void 0===l?void 0:l.cities;K(null!==s&&void 0!==s?s:[]),setTimeout((()=>{se("profile",e.data.data.profile)}),0)}}else(0,j.c3)("Something went wrong...Please try again..!")})).catch((e=>{(0,j.c3)("Something went wrong...Please try again..!")}))}),[Z,se]);(0,l.useEffect)((()=>{Z.length>0&&(ce(),de())}),[Z,de]);const ce=()=>{const e=localStorage.getItem("USER_ID");x.A.get(`${f.H}/profile-image-upload/${e}`).then((e=>{var s,i;200===(null===e||void 0===e?void 0:e.status)?null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&null!==(i=s.data)&&void 0!==i&&i.imageUrl&&B(`${f.H}/${e.data.data.imageUrl}`):(0,j.c3)("Unable to fetch profile image")})).catch((e=>{(0,j.c3)("Something went wrong...Please try again..!")}))},oe=async()=>{try{return(await x.A.get("https://countriesnow.space/api/v0.1/countries")).data.data}catch(e){}};return(0,N.jsx)(l.Fragment,{children:(0,N.jsx)("form",{onSubmit:ie((async e=>{te(!0),e.profile.dob=e.profile.dob.toISOString().split("T")[0];(await x.A.put(`${f.H}/profile-update`,e)).data.data?(te(!1),(0,j.c3)("Profile Updated successfully!",!1)):((0,j.c3)("Something went wrong..Please try again..!"),te(!1)),setTimeout((()=>{te(!1)}),3e3)})),children:(0,N.jsx)("div",{className:`container ${a} `,children:(0,N.jsx)("div",{className:t,children:(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"d-flex justify-content-between pb-2",children:[(0,N.jsx)("div",{children:(0,N.jsx)(g.A,{heading:"Profile Settings"})}),(0,N.jsx)("div",{className:"text-center",children:(0,N.jsx)("button",{type:"submit",className:"btn btn-primary btn-color",disabled:ae,children:"Update "})})]}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:`d-flex justify-content-left ${m}`,children:[(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("input",{type:"file",id:"profileImage",hidden:!0,htmlFor:"profileImage",ref:X,onChange:e=>(e=>{var s,i;null!==e&&void 0!==e&&null!==(s=e.target)&&void 0!==s&&null!==(i=s.files)&&void 0!==i&&i[0]&&(B(URL.createObjectURL(e.target.files[0])),M(e.target.files[0]),Q(!0))})(e),accept:".png, .jpeg, .jpg, .svg, .webp"}),(0,N.jsx)("div",{className:"d-flex justify-content-center",children:(0,N.jsx)("img",{src:null!==H&&void 0!==H?H:b,alt:"ProfileImage",className:c})})]}),(0,N.jsx)("div",{className:"d-flex justify-content-around mb-3",children:V?(0,N.jsxs)("div",{className:"d-flex justify-content-around mb-3 mt-3",children:[(0,N.jsx)("div",{className:"me-2",children:(0,N.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>(M(null),ce(),void Q(!1)),children:"Cancel"})}),(0,N.jsx)("div",{children:(0,N.jsx)("button",{className:"btn btn-primary btn-sm",type:"button",onClick:()=>(()=>{te(!0);const e=localStorage.getItem("USER_ID");x.A.post(`${f.H}/profile-image-upload/${e}`,{"profile-image":G},{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{te(!1),Q(!1),(0,j.c3)("Profile picture successfully uploaded",!1)})).catch((e=>{te(!1),(0,j.c3)("Something went wrong...Please try again..!")})).finally((()=>{te(!1)}))})(),children:"Save"})})]}):(0,N.jsx)("div",{children:(0,N.jsx)("i",{className:"fa fa-pencil","aria-hidden":"true",onClick:()=>{X.current.click()}})})})]}),(0,N.jsx)("div",{className:`d-flex justify-content-between ${u} `,children:(0,N.jsxs)("div",{className:h,children:[(0,N.jsx)("p",{className:`${p} mb-1`,children:re.userName}),(0,N.jsx)("p",{className:"mb-1",children:re.email}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("div",{className:"form-check form-switch",children:[(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",id:"openToCollab",...W("profile.openToCollab")}),(0,N.jsx)("label",{className:"form-check-label",htmlFor:"openToCollab",children:"Open To Collab"})]}),(0,N.jsxs)("div",{className:"form-check form-switch",children:[(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",id:"isActive",...W("profile.isActive")}),(0,N.jsx)("label",{className:"form-check-label",htmlFor:"isActive",children:"Active"})]})]})]})})]}),(0,N.jsxs)("div",{className:o,children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"fname",className:`${n}`,children:"First Name"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{type:"text",id:"fname",className:`${r}`,...W("user.firstName",{required:"First name is required"})}),(0,N.jsx)("p",{className:"text-danger",children:null===(e=le.user)||void 0===e||null===(s=e.firstName)||void 0===s?void 0:s.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"lname",className:`${n}`,children:"Last Name"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{type:"text",id:"lname",className:`${r}`,...W("user.lastName",{required:"Last name is required"})}),(0,N.jsx)("p",{className:"text-danger",children:null===(i=le.user)||void 0===i||null===(y=i.lastName)||void 0===y?void 0:y.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"pNo",className:`${n}`,children:"Phone Number"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{type:"text",id:"pNo",className:`${r}`,...W("profile.phoneNumber",{required:"Phone number is required",pattern:{value:/^(\+\d{1,2}\s?)?\(?\d{3}\)?[\s-]?\d{3}[\s-]?\d{4}$/,message:"Invalid phone number"}})}),(0,N.jsx)("p",{className:"text-danger",children:null===(S=le.profile)||void 0===S||null===(_=S.phoneNumber)||void 0===_?void 0:_.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"address",className:`${n}`,children:"Address"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{type:"text",id:"address",className:`${r}`,...W("profile.address",{required:"Address are required"})}),(0,N.jsx)("p",{className:"text-danger",children:null===(C=le.profile)||void 0===C||null===($=C.address)||void 0===$?void 0:$.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"country",className:`${n}`,children:"Country"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("select",{className:`${r}`,...W("profile.country",{required:"Country is required"}),children:[(0,N.jsx)("option",{value:"",children:"Select Country"}),Z.map(((e,s)=>(0,N.jsx)("option",{value:e.country,children:e.country},s)))]}),(0,N.jsx)("p",{className:"text-danger",children:null===(E=le.profile)||void 0===E||null===(k=E.address)||void 0===k?void 0:k.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"city",className:`${n}`,children:"City"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("select",{type:"text",id:"city",className:`${r}`,...W("profile.city",{required:"City is required"}),children:[(0,N.jsx)("option",{value:"",children:"Select City"}),J.map(((e,s)=>(0,N.jsx)("option",{value:e,children:e},e)))]}),(0,N.jsx)("p",{className:"text-danger",children:null===(w=le.profile)||void 0===w||null===(I=w.city)||void 0===I?void 0:I.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"gender",className:`${n}`,children:"Gender"})}),(0,N.jsxs)("select",{className:`mb-3 ${r}`,id:"gender",...W("profile.gender",{required:"Please select Gender"}),children:[(0,N.jsx)("option",{value:"",children:"Open this select menu"}),(0,N.jsx)("option",{value:"Male",children:"Male"}),(0,N.jsx)("option",{value:"Female",children:"Female"}),(0,N.jsx)("option",{value:"Others",children:"Others"})]}),(0,N.jsx)("p",{className:"text-danger",children:null===(A=le.profile)||void 0===A||null===(F=A.gender)||void 0===F?void 0:F.message})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"dob",className:`${n}`,children:"DOB"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{type:"date",max:(()=>{const e=new Date;return e.setHours(0,0,0,0),e.toISOString().split("T")[0]})(),id:"dob",className:`${r}`,...W("profile.dob",{required:"DOB is required",valueAsDate:!0})}),(0,N.jsx)("p",{className:"text-danger",children:null===(P=le.profile)||void 0===P||null===(O=P.dob)||void 0===O?void 0:O.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"skills",className:`${n}`,children:"Skills"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{type:"text",id:"skills",className:`${r}`,...W("profile.skills",{required:"Skills are required"})}),(0,N.jsx)("p",{className:d,children:"Hint:Singing,Dancing,Musician,.."}),(0,N.jsx)("p",{className:"text-danger",children:null===(q=le.profile)||void 0===q||null===(D=q.skills)||void 0===D?void 0:D.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"interestedIn",children:"Interests"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{type:"text",id:"interestedIn",className:`${r}`,...W("profile.interestedIn")}),(0,N.jsx)("p",{className:d,children:"Hint:Singing,Dancing,Musician,.."}),(0,N.jsx)("p",{className:"text-danger",children:null===(R=le.profile)||void 0===R||null===(U=R.interestedIn)||void 0===U?void 0:U.message})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("label",{htmlFor:"bio",children:"Bio"})}),(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("textarea",{id:"bio",className:`${r}`,...W("profile.bio")}),(0,N.jsx)("p",{className:"text-danger",children:null===(L=le.profile)||void 0===L||null===(T=L.bio)||void 0===T?void 0:T.message})]})]})]})]})]})})})})})}},2037:(e,s,i)=>{i.d(s,{I9:()=>n,XQ:()=>d,ZS:()=>c,c3:()=>r,rC:()=>t,xH:()=>o});var l=i(3401);const a=["mp4","mov"],t=e=>{const s=null===e||void 0===e?void 0:e.split("."),i=s[s.length-1];return!a.includes(null===i||void 0===i?void 0:i.toLowerCase())},r=function(e){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l.oR[s?"error":"success"](e,{position:"top-right",autoClose:1e4,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:l.br})},n={GROUP:"GROUP",COLLAB:"COLLAB"},d={APPROVED:"APPROVED",REQUESTED:"REQUESTED",REJECTED:"REJECTED"},c={SELF:"SELF",EVENT:"EVENT",COLLAB:"COLLAB"},o=e=>e.split(/([.!?])\s*/).map(((e,s)=>s%2===0?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e)).join("")},6824:(e,s,i)=>{i.d(s,{A:()=>t});i(5043);const l="Title_heading-font__UosSp";var a=i(579);const t=function(e){return(0,a.jsx)("div",{className:`${l}`,children:e.heading})}}}]);
//# sourceMappingURL=534.b8996e04.chunk.js.map