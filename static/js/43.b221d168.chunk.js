"use strict";(self.webpackChunkindie_fusion_ui=self.webpackChunkindie_fusion_ui||[]).push([[43],{9043:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(5043);const l="Create_createPostCard__mQs28",i="Create_input-box__4TtSA",n="Create_icon__bUeWg",o="Create_image-upload__KPGFQ",d="Create_withBackground__n6Esu",r="Create_post-height__7u8K5",c="Create_font-size-family__loIaT";var u=a(6213),m=a(8585),p=a(3216),h=a(2037),v=a(6824),x=a(579);const g=function(){const e=(0,p.g)(),t=(0,s.useMemo)((()=>({text:"",media:"",type:"SELF",title:"",startDate:"",endDate:""})),[]),[a,g]=(0,s.useState)(t),[f,j]=(0,s.useState)(!0),C=(0,p.Zp)(),E=(0,s.useRef)(),[S,b]=(0,s.useState)(!1),[y,N]=(0,s.useState)(""),[_,D]=(0,s.useState)(!1),[T,P]=(0,s.useState)(!1),U=(0,s.useCallback)((()=>{const t=localStorage.getItem("USER_ID");u.A.get(`${m.H}/post/${t}/${null===e||void 0===e?void 0:e.postId}`).then((e=>{var t;if(null!==(t=e.data)&&void 0!==t&&t.data){const t=e.data.data;g({text:t.text,type:t.type,title:null===t||void 0===t?void 0:t.title,startDate:null===t||void 0===t?void 0:t.startDate,endDate:null===t||void 0===t?void 0:t.endDate}),null!==t&&void 0!==t&&t.mediaUrl?(N(`${m.H}/${t.mediaUrl}`),D(!0),j((0,h.rC)(null===t||void 0===t?void 0:t.mediaUrl))):P(!0)}else(0,h.c3)("Not able to fetch the data now... Try again later... ")})).catch((e=>{(0,h.c3)("Something went wrong... Please try again")}))}),[null===e||void 0===e?void 0:e.postId]);(0,s.useEffect)((()=>{e.postId?U():(D(!1),g(t))}),[null===e||void 0===e?void 0:e.postId,t,U]);const L=async()=>{const e=localStorage.getItem("USER_ID");b(!0);try{(await u.A.post(`${m.H}/post/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data.data?(b(!1),(0,h.c3)("Post Created successfully!",!1),setTimeout((()=>{C("/dashboard")}),2e3)):(b(!1),(0,h.c3)("Unable to create ... Please try again")),setTimeout((()=>{b(!1)}),3e3)}catch(t){b(!1),(0,h.c3)("Something went wrong..Please try again..!")}},w=async()=>{const t=localStorage.getItem("USER_ID");b(!0);try{(await u.A.put(`${m.H}/post/${t}/${e.postId}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data.data?(b(!1),(0,h.c3)("Post Updated successfully!",!1)):(b(!1),(0,h.c3)("Unable to Update ... Please try again")),setTimeout((()=>{b(!1)}),3e3)}catch(s){b(!1),(0,h.c3)("Something went wrong..Please try again..!")}},I=(0,s.useCallback)((()=>a.type===h.ZS.SELF?S||!_&&!a.text:h.ZS.EVENT===a.type?!(a.startDate&&a.endDate&&a.title)||(S||!_&&!a.text):!!a.title&&(S||!_&&!a.text)),[_,a,S]);return(0,x.jsx)("div",{className:l,children:(0,x.jsxs)("div",{className:`card p-3 ${r}`,children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,x.jsx)("div",{children:(0,x.jsx)(v.A,{heading:e.postId?"Update Post":"Create Post"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"collabPost",className:`${c}`,children:"Post Type"}),(0,x.jsxs)("select",{className:`${i}`,id:"collabPost",disabled:e.postId,value:a.type,onChange:e=>g({...a,type:e.target.value}),children:[(0,x.jsx)("option",{value:h.ZS.SELF,className:"text-capitalize",children:"Self"}),(0,x.jsx)("option",{value:h.ZS.COLLAB,className:"text-capitalize",children:"Collab"}),(0,x.jsx)("option",{value:h.ZS.EVENT,className:"text-capitalize",children:"Event"})]})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"mb-3",children:(null===a||void 0===a?void 0:a.type)!==h.ZS.SELF&&(0,x.jsxs)("div",{className:"form-floating",children:[(0,x.jsx)("input",{className:"form-control",placeholder:"Title",id:"title",value:a.title,onChange:e=>g({...a,title:e.target.value})}),(0,x.jsx)("label",{htmlFor:"title",children:"Title"})]})}),(0,x.jsx)("div",{className:"mb-3",children:(null===a||void 0===a?void 0:a.type)===h.ZS.EVENT&&(0,x.jsxs)("div",{className:"form-floating",children:[(0,x.jsx)("input",{type:"date",min:(new Date).toJSON().slice(0,10),className:"form-control",placeholder:"Start Date",id:"start-date",value:a.startDate,onChange:e=>g({...a,startDate:e.target.value})}),(0,x.jsx)("label",{htmlFor:"start-date",children:"Start Date"})]})}),(0,x.jsx)("div",{className:"mb-3",children:(null===a||void 0===a?void 0:a.type)===h.ZS.EVENT&&(0,x.jsxs)("div",{className:"form-floating",children:[(0,x.jsx)("input",{type:"date",min:(new Date).toJSON().slice(0,10),className:"form-control",placeholder:"End Date",id:"end-date",value:a.endDate,onChange:e=>g({...a,endDate:e.target.value})}),(0,x.jsx)("label",{htmlFor:"end-date",children:"End Date"})]})}),(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsxs)("div",{className:"form-floating",children:[(0,x.jsx)("textarea",{style:{height:"100px"},className:"form-control",placeholder:"Type Here....",id:"floatingTextarea",rows:5,value:a.text,onChange:e=>g({...a,text:e.target.value})}),(0,x.jsx)("label",{htmlFor:"floatingTextarea",children:"Status"})]})}),!T&&(0,x.jsx)("div",{className:`d-flex justify-content-center align-items-center ${o} ${e.id||_?"":d}`,children:_?(0,x.jsx)("div",{className:"d-flex justify-content-center",children:f?(0,x.jsx)("img",{src:y,alt:"postImage"}):(0,x.jsx)("video",{src:y,controls:!0})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("input",{type:"file",id:"media",hidden:!0,htmlFor:"media",ref:E,onChange:e=>(e=>{var t,s;if(null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&null!==(s=t.files)&&void 0!==s&&s[0]){const t=e.target.files[0];j((0,h.rC)(t.name)),N(URL.createObjectURL(t)),g({...a,media:t}),D(!0)}})(e),accept:".mp4, .mov, .png, .jpeg, .jpg, .svg, .webp"}),(0,x.jsx)("div",{children:(0,x.jsx)("i",{className:`fa fa-upload ${n}`,"aria-hidden":"true",onClick:()=>{E.current.click()}})})]})}),(0,x.jsxs)("div",{className:"d-flex justify-content-center pt-3",children:[(0,x.jsx)("div",{children:(0,x.jsx)("button",{className:"btn btn-primary",onClick:()=>{C("/dashboard")},disabled:S,children:"Cancel"})}),(0,x.jsx)("div",{className:"ms-3",children:(0,x.jsx)("button",{className:"btn btn-primary",onClick:async()=>{e.postId?w():L()},disabled:I(),children:e.postId?"Update":"Create"})})]})]})]})})}},2037:(e,t,a)=>{a.d(t,{I9:()=>o,XQ:()=>d,ZS:()=>r,c3:()=>n,rC:()=>i,xH:()=>c});var s=a(3401);const l=["mp4","mov"],i=e=>{const t=null===e||void 0===e?void 0:e.split("."),a=t[t.length-1];return!l.includes(null===a||void 0===a?void 0:a.toLowerCase())},n=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];s.oR[t?"error":"success"](e,{position:"top-right",autoClose:1e4,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:s.br})},o={GROUP:"GROUP",COLLAB:"COLLAB"},d={APPROVED:"APPROVED",REQUESTED:"REQUESTED",REJECTED:"REJECTED"},r={SELF:"SELF",EVENT:"EVENT",COLLAB:"COLLAB"},c=e=>e.split(/([.!?])\s*/).map(((e,t)=>t%2===0?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e)).join("")},6824:(e,t,a)=>{a.d(t,{A:()=>i});a(5043);const s="Title_heading-font__UosSp";var l=a(579);const i=function(e){return(0,l.jsx)("div",{className:`${s}`,children:e.heading})}}}]);
//# sourceMappingURL=43.b221d168.chunk.js.map