"use strict";(self.webpackChunkindie_fusion_ui=self.webpackChunkindie_fusion_ui||[]).push([[884],{1884:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var i=a(5043);const r="LoginRegister_container-card__3GdR7",n="LoginRegister_login-card__oRend",t="LoginRegister_input-box__BTCH4",l="LoginRegister_btn-color__l3W1e",d="LoginRegister_btn-link__lk8Dg",c="LoginRegister_link__xpp94";var o=a(6213),m=a(4858),g=a(3216),u=a(5475),x=a(8585),h=a(579);const j=function(e){const s=(0,g.Zp)(),{register:a,formState:{errors:r},handleSubmit:n,reset:d}=(0,m.mN)({mode:"onChange",defaultValues:{email:"",password:""}}),[j,N]=(0,i.useState)({isLoading:!1,errorMessage:"",successMessage:""});return(0,h.jsxs)(i.Fragment,{children:[(j.errorMessage||j.successMessage)&&(0,h.jsxs)("div",{className:`alert ${j.errorMessage?"alert-danger":"alert-success"}  alert-dismissible fade show`,role:"alert",children:[j.errorMessage,j.successMessage]}),(0,h.jsxs)("form",{onSubmit:n((async e=>{N({isLoading:!0,errorMessage:"",successMessage:""});try{const r=await o.A.post(`${x.H}/login`,e);var a,i;if(r.data.data)N({isLoading:!1,errorMessage:"",successMessage:"User logged in successfully"}),d(),localStorage.setItem("USER_ID",null===(a=r.data.data)||void 0===a?void 0:a._id),localStorage.setItem("userName",null===(i=r.data.data)||void 0===i?void 0:i.userName),s("/profile");else N({isLoading:!1,errorMessage:r.data.success,successMessage:""})}catch(n){var r;404===(null===n||void 0===n||null===(r=n.response)||void 0===r?void 0:r.status)?N({isLoading:!1,errorMessage:"Invalid credentials... Please try again",successMessage:""}):N({isLoading:!1,errorMessage:"Something went wrong... Please try again",successMessage:""})}})),children:[(0,h.jsx)("div",{children:(0,h.jsx)("label",{htmlFor:"email",children:"Email"})}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("input",{type:"email",id:"email",className:`${t}`,...a("email",{required:"Email is required"})}),(0,h.jsx)("p",{className:"text-danger",children:r.email&&r.email.message})]}),(0,h.jsx)("div",{children:(0,h.jsx)("label",{htmlFor:"pass",children:"Password"})}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("input",{type:"password",id:"pass",className:`${t}`,...a("password",{required:"Password is required"})}),(0,h.jsx)("p",{className:"text-danger",children:r.password&&r.password.message}),(0,h.jsx)("p",{className:"text-end mt-2",children:(0,h.jsx)(u.N_,{to:"/forgot-password",children:"Forgot Password? "})})]}),(0,h.jsx)("div",{className:"text-center",children:(0,h.jsx)("button",{type:"submit",className:`btn btn-primary ${l}`,disabled:j.isLoading,children:j.isLoading?"Loading...":"Login"})}),(0,h.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,h.jsx)("p",{className:"text-center mt-2",children:"Don't have an account? "}),(0,h.jsx)("button",{type:"button",className:`nav-link mt-2 ${c}`,onClick:()=>{e.registerHandler()},children:"Register"})]})]})]})};const N=function(e){const{register:s,formState:{errors:a},handleSubmit:r,reset:n}=(0,m.mN)({mode:"onChange",defaultValues:{firstName:"",lastName:"",userName:"",email:"",type:"USER"}}),[d,g]=(0,i.useState)({isLoading:!1,errorMessage:"",successMessage:""});return(0,h.jsxs)(i.Fragment,{children:[(d.errorMessage||d.successMessage)&&(0,h.jsxs)("div",{className:`alert ${d.errorMessage?"alert-danger":"alert-success"}  alert-dismissible fade show`,role:"alert",children:[d.errorMessage,d.successMessage]}),(0,h.jsxs)("form",{onSubmit:r((async e=>{g({isLoading:!0,errorMessage:"",successMessage:""});const s=await o.A.post(`${x.H}/register`,e);s.data.data?(g({isLoading:!1,errorMessage:"",successMessage:"Registered successfully. Password is sent to your registered email"}),n()):g({isLoading:!1,errorMessage:s.data.success,successMessage:""})})),children:[(0,h.jsx)("div",{children:(0,h.jsx)("label",{htmlFor:"fname",children:"First Name"})}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("input",{type:"text",id:"fname",className:`${t}`,...s("firstName",{required:"First name is required"})}),(0,h.jsx)("p",{className:"text-danger",children:a.firstName&&a.firstName.message})]}),(0,h.jsx)("div",{children:(0,h.jsx)("label",{htmlFor:"lname",children:"Last Name"})}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("input",{type:"text",id:"lname",className:`${t}`,...s("lastName",{required:"Last name is required"})}),(0,h.jsx)("p",{className:"text-danger",children:a.lastName&&a.lastName.message})]}),(0,h.jsx)("div",{children:(0,h.jsx)("label",{htmlFor:"uname",children:"Username"})}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("input",{type:"text",id:"uname",className:`${t}`,...s("userName",{required:"Username name is required"})}),(0,h.jsx)("p",{className:"text-danger",children:a.userName&&a.userName.message})]}),(0,h.jsx)("div",{children:(0,h.jsx)("label",{htmlFor:"email",children:"Email"})}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("input",{type:"email",id:"email",className:`${t}`,...s("email",{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Invalid email format"}})}),(0,h.jsx)("p",{className:"text-danger",children:a.email&&a.email.message})]}),(0,h.jsx)("div",{className:"text-center",children:(0,h.jsx)("button",{type:"submit",className:`btn btn-primary ${l}`,disabled:d.isLoading,children:d.isLoading?"Loading...":"Register"})}),(0,h.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,h.jsx)("p",{className:"text-center mt-2",children:"Already have an account? "}),(0,h.jsx)("button",{className:`nav-link mt-2 ${c}`,onClick:()=>{e.loginHandler()},children:"Login"})]})]})]})};const p=function(){const[e,s]=(0,i.useState)(!0),a=()=>{s(!1)},t=()=>{s(!0)};return(0,h.jsx)(i.Fragment,{children:(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:`container ${r}`,children:(0,h.jsx)("div",{className:`d-flex justify-content-center ${n}`,children:(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"d-flex justify-content-around mb-5",children:(0,h.jsxs)("ul",{className:"nav nav-pills nav-fill",children:[(0,h.jsx)("li",{className:"nav-item",children:(0,h.jsx)("button",{type:"button",className:`nav-link ${e?l:""}`,onClick:()=>t(),children:"Login"})}),(0,h.jsx)("li",{className:"nav-item",children:(0,h.jsx)("button",{type:"button",className:`nav-link ${d} ${e?"":l}`,onClick:()=>a(),children:"Register"})})]})}),e?(0,h.jsx)(j,{registerHandler:a}):(0,h.jsx)(N,{loginHandler:t})]})})})})})}}}]);
//# sourceMappingURL=884.242ced98.chunk.js.map